# Vulnerability Report
*updated May 17, 2020*

## Vulnerability 1:

### Exposure
By going to the url "https://holeyforkingshirts.azurewebsites.net/Admin/Dashboard", or any other admin pages,
any user, either logged in or anonymous, would be able to access not just our entire order history, 
but also be able to alter and rewrite our entire inventory however they
wanted, offering goods that either didn't exist, or changing prices.

This could have either made customers pay for things we couldn't send to them, or get anything they want from the site for free.

### Repair
The admin dashboard and all admin-only pages have now been assigned policies that only let in one of our four admin users, otherwise,
they'll be automatically asked to sign in. This code fixed the vulnerability:  
  
  `[Authorize(Policy = "AdminOnly")]`

### Resources
[Policy-Based Authorization in ASP.Net Core](https://docs.microsoft.com/en-us/aspnet/core/security/authorization/policies?view=aspnetcore-3.1)

## Vulnerability 2:

### Exposure
Without Identity Framework, any user could potentially discover the password and log in to any account in our database.

This could allow people to make unauthorized purchases for anyone, or log in as an administrator for the site.

### Repair
Using Identity framework, all passwords have secure hashes and unique salting, encrypting them so anonymouses can't get 'em.

### Resources
[Identity on ASP.Net Core] (https://docs.microsoft.com/en-us/aspnet/core/security/authentication/identity?view=aspnetcore-2.2&tabs=visual-studio)

## Vulnerability 3:

### Exposure
When an invalid login is used, the user could discover what they needed to change to hack in to someone else's account if we told them 
"hey, your email is wrong" or "your password is wrong"

This would allow them to narrow down what piece of information they were missing.

### Repair
Instead, when an invalid login attempt is made, we don't specify what went wrong, we just redirect them to login again, and tell them 
their last attempt was invalid.

### Resources
Amand Iverson, Security Mogul

## Vulnerability 4:

### Exposure
Without utilizing App settings on azure, all of our "secret" API keys and connection strings would be publicly available inour site's source code.

Any user would be able to use those keys for their own purposes, and depending on the server they connected to, possibly get our site shut down.

### Repair
All connection strings and user secrets are no longer in an `appsettings.json` file, but are instead stored within azure, behind our company login.

### Resources
[Azure Portal](https://portal.azure.com/#home)
